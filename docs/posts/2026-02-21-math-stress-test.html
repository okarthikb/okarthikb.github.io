<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Stress Test: Tagged vs Untagged Display</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <link rel="stylesheet" href="/css/default.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.hljs && document.querySelector('pre code')) {
                hljs.highlightAll();
            }
            if (window.katex) {
                document.querySelectorAll('.math').forEach(function (el) {
                    const tex = el.textContent;
                    katex.render(tex, el, {
                        displayMode: el.classList.contains('display'),
                        throwOnError: false
                    });
                });
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <main>
<article>
    <h1 class="post-title">Math Stress Test: Tagged vs Untagged Display</h1>
    <span class="post-date">2026-02-21</span>
    <p><a class="page-back" href="/" aria-label="Back to home">&#9756;</a></p>
<p>This post is a rendering stress test for display math, short and long
equations, tags, multiline alignment, and literal escape behavior.</p>
<h3 id="baseline-repeated-equation-untagged-then-tagged">Baseline
repeated equation (untagged then tagged)</h3>
<p><span class="math display">
\boxed{\int_{-\infty}^{\infty} e^{-x^2/2}\,dx = \sqrt{2\pi}}
</span></p>
<p><span class="math display">
\boxed{\int_{-\infty}^{\infty} e^{-x^2/2}\,dx = \sqrt{2\pi}} \tag{1}
</span></p>
<p>Expected behavior: both lines should stay centered; tagging should
only add the right-side number.</p>
<h3 id="short-tagged-equations-dense-numbering">Short tagged equations
(dense numbering)</h3>
<p><span class="math display"> a+b=c \tag{3} </span></p>
<p><span class="math display"> e^{i\pi}+1=0 \tag{4} </span></p>
<p><span class="math display"> \nabla \cdot \mathbf{E} =
\frac{\rho}{\varepsilon_0} \tag{5} </span></p>
<p><span class="math display"> \det(AB)=\det(A)\det(B) \tag{6}
</span></p>
<h3 id="wide-equation-forced-overflow">Wide equation (forced
overflow)</h3>
<p><span class="math display">
\log p_\theta(x_{1:T}) =
\sum_{t=1}^{T}
\log
\left(
\sum_{z_t=1}^{K}
\sum_{z_{t-1}=1}^{K}
p_\theta(x_t \mid z_t)\,p_\theta(z_t \mid z_{t-1})\,p_\theta(z_{t-1}
\mid x_{1:t-1})
\right)
\tag{2}
</span></p>
<h3 id="very-wide-rational-expression-forced-overflow">Very wide
rational expression (forced overflow)</h3>
<p><span class="math display">
\frac{
\sum_{k=1}^{K}
\left(
\prod_{j=1}^{J}
\left(1+\alpha_{k,j}x_j+\beta_{k,j}x_j^2\right)
\right)
}
{
1+
\sum_{m=1}^{M}
\left(
\gamma_m
\sum_{n=1}^{N}\delta_{m,n}x_n
\right)^2
}
\tag{7}
</span></p>
<h3 id="multiline-derivation-with-per-line-tags-align">Multiline
derivation with per-line tags (<code>align</code>)</h3>
<p><span class="math display">
\begin{align}
\mathcal{L}(\theta)
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x,z) - \log q(z\mid x)\right]
\tag{8}
\\
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x\mid z)\right]
- D_{\mathrm{KL}}(q(z\mid x)\,\|\,p(z))
\tag{9}
\\
&amp;\le \log p_\theta(x)
\tag{10}
\end{align}
</span></p>
<h3 id="longer-per-line-tagged-system-align">Longer per-line tagged
system (<code>align</code>)</h3>
<p><span class="math display">
\begin{align}
\mathbf{h}_t &amp;= \sigma(W_h \mathbf{h}_{t-1} + U_h \mathbf{x}_t +
\mathbf{b}_h) \tag{11} \\
\mathbf{o}_t &amp;= W_o \mathbf{h}_t + \mathbf{b}_o \tag{12} \\
p(\mathbf{y}_t \mid \mathbf{x}_{\le t}) &amp;=
\operatorname{softmax}(\mathbf{o}_t) \tag{13} \\
\mathcal{J}(\theta) &amp;= -\sum_{t=1}^{T}\log p(y_t^\star \mid
\mathbf{x}_{\le t}) \tag{14}
\end{align}
</span></p>
<h3 id="same-multiline-block-without-tags-alignment-comparison">Same
multiline block without tags (alignment comparison)</h3>
<p><span class="math display">
\begin{aligned}
\mathcal{L}(\theta)
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x,z) - \log q(z\mid x)\right]
\\
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x\mid z)\right]
- D_{\mathrm{KL}}(q(z\mid x)\,\|\,p(z))
\\
&amp;\le \log p_\theta(x)
\end{aligned}
</span></p>
<h3 id="category-theory-flavored-equalities">Category-theory flavored
equalities</h3>
<p><span class="math display">
\mathrm{Hom}_{\mathcal{C}}(A \otimes B, C)
\cong
\mathrm{Hom}_{\mathcal{C}}(A, [B,C])
\cong
\mathrm{Nat}\!\left(h_A \times h_B, h_C\right)
\tag{15}
</span></p>
<p><span class="math display">
\begin{aligned}
F(\operatorname{colim}_{i \in I} X_i)
&amp;\cong \operatorname{colim}_{i \in I} F(X_i)
\\
G(\operatorname{lim}_{j \in J} Y_j)
&amp;\cong \operatorname{lim}_{j \in J} G(Y_j)
\end{aligned}
</span></p>
<h3 id="matrix-heavy-block">Matrix-heavy block</h3>
<p><span class="math display">
\Sigma =
\begin{bmatrix}
\sigma_{11} &amp; \sigma_{12} &amp; \cdots &amp; \sigma_{1n} \\
\sigma_{21} &amp; \sigma_{22} &amp; \cdots &amp; \sigma_{2n} \\
\vdots      &amp; \vdots      &amp; \ddots &amp; \vdots      \\
\sigma_{n1} &amp; \sigma_{n2} &amp; \cdots &amp; \sigma_{nn}
\end{bmatrix},
\qquad
\Sigma^{-1}
=
\frac{1}{\det(\Sigma)}\,\operatorname{adj}(\Sigma)
\tag{16}
</span></p>
<h3 id="escape-matrix-literal-characters-and-delimiters">Escape matrix
(literal characters and delimiters)</h3>
<p>The lines below should render as plain text, not math:</p>
<ul>
<li>Price literal: $19.99</li>
<li>Shell var literal: $PATH</li>
<li>Double-dollar literal text: $$TOKEN$$</li>
<li>Literal backslash delimiters in prose: \(not-math\),
\[not-math\]</li>
<li>Literal braces: {a,b,c}</li>
<li>Literal hash: # heading-marker</li>
<li>Literal underscore in prose: foo_bar</li>
<li>Literal percent: 100% certainty</li>
<li>Literal ampersand: R&amp;D</li>
</ul>
<p>Inline check in plain text (without code): $this is literal$.</p>

</article>
        </main>
        <footer>
            Â© Karthik 2023-2026
        </footer>
    </div>
    <script>
        if (document.querySelector('blockquote.twitter-tweet')) {
            const twitterScript = document.createElement('script');
            twitterScript.async = true;
            twitterScript.src = 'https://platform.twitter.com/widgets.js';
            twitterScript.charset = 'utf-8';
            document.body.appendChild(twitterScript);
        }
    </script>
</body>
</html>
