<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Stress Test: KaTeX Torture Suite</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <link rel="stylesheet" href="/css/default.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.hljs && document.querySelector('pre code')) {
                hljs.highlightAll();
            }
            if (window.katex) {
                document.querySelectorAll('.math').forEach(function (el) {
                    const tex = el.textContent;
                    katex.render(tex, el, {
                        displayMode: el.classList.contains('display'),
                        throwOnError: false
                    });
                });
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <main>
<article>
    <h1 class="post-title">Math Stress Test: KaTeX Torture Suite</h1>
    <span class="post-date">2026-02-21</span>
    <p><a class="page-back" href="/" aria-label="Back to home">&#9756;</a></p>
<p>This post is an intentionally excessive KaTeX stress test for
centering, equation tagging, multiline environments, overflow, boxed
displays, and plain-text escaping.</p>
<h3 id="centering-baseline-same-equation-untagged-then-tagged">Centering
baseline (same equation, untagged then tagged)</h3>
<p><span class="math display">
\boxed{\int_{-\infty}^{\infty} e^{-x^2/2}\,dx = \sqrt{2\pi}}
</span></p>
<p><span class="math display">
\boxed{\int_{-\infty}^{\infty} e^{-x^2/2}\,dx = \sqrt{2\pi}} \tag{1}
</span></p>
<p>Expected behavior: both equations stay centered; the tag only adds a
right-side label.</p>
<h3 id="dense-short-tagged-equations">Dense short tagged equations</h3>
<p><span class="math display"> a+b=c \tag{2} </span> <span
class="math display"> x^2+y^2=z^2 \tag{3} </span> <span
class="math display"> \det(AB)=\det(A)\det(B) \tag{4} </span> <span
class="math display"> \nabla \cdot \mathbf{E} =
\frac{\rho}{\varepsilon_0} \tag{5} </span> <span class="math display">
\nabla \times \mathbf{E} = -\frac{\partial \mathbf{B}}{\partial t}
\tag{6} </span> <span class="math display"> \sum_{k=1}^{n} k =
\frac{n(n+1)}{2} \tag{7} </span> <span class="math display">
\sum_{k=1}^{n} k^2 = \frac{n(n+1)(2n+1)}{6} \tag{8} </span> <span
class="math display"> \prod_{k=1}^{n} (1+a_k) = 1 + \sum_{m=1}^{n}
\sum_{1\le i_1&lt;\cdots&lt;i_m\le n} a_{i_1}\cdots a_{i_m} \tag{9}
</span></p>
<h3 id="overflow-monster-i">Overflow monster I</h3>
<p><span class="math display">
\log p_\theta(x_{1:T}) =
\sum_{t=1}^{T}
\log
\left(
\sum_{z_t=1}^{K}
\sum_{z_{t-1}=1}^{K}
p_\theta(x_t \mid z_t)\,p_\theta(z_t \mid z_{t-1})\,p_\theta(z_{t-1}
\mid x_{1:t-1})
\right)
\tag{10}
</span></p>
<h3 id="overflow-monster-ii-nested-fraction-powers-sums">Overflow
monster II (nested fraction + powers + sums)</h3>
<p><span class="math display">
\frac{
\sum_{k=1}^{K}
\left(
\prod_{j=1}^{J}
\left(1+\alpha_{k,j}x_j+\beta_{k,j}x_j^2\right)
\right)
}
{
1+
\sum_{m=1}^{M}
\left(
\gamma_m
\sum_{n=1}^{N}\delta_{m,n}x_n
\right)^2
}
\tag{11}
</span></p>
<h3 id="overflow-monster-iii-single-line-width-torture">Overflow monster
III (single-line width torture)</h3>
<p><span class="math display">
\boxed{
\mathbb{P}\!\left(
\bigcap_{t=1}^{T}
\left\{
\left|
\sum_{i=1}^{n}
\left[
\left(
\prod_{j=1}^{m}
\left(1+\alpha_{t,i,j}u_j+\beta_{t,i,j}u_j^2\right)
\right)
\left(
\sum_{r=1}^{R}\gamma_{t,i,r}v_r
\right)
\right]
\right| \le \varepsilon_t
\right\}
\right)
}
\tag{12}
</span></p>
<h3 id="align-with-per-line-tags"><code>align</code> with per-line
tags</h3>
<p><span class="math display">
\begin{align}
\mathcal{L}(\theta)
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x,z) - \log q(z\mid x)\right]
\tag{13}
\\
&amp;= \mathbb{E}_{q(z\mid x)}
\left[\log p_\theta(x\mid z)\right]
- D_{\mathrm{KL}}(q(z\mid x)\,\|\,p(z))
\tag{14}
\\
&amp;\le \log p_\theta(x)
\tag{15}
\end{align}
</span></p>
<h3 id="align-system-with-many-tags"><code>align</code> system with many
tags</h3>
<p><span class="math display">
\begin{align}
\mathbf{h}_t &amp;= \sigma(W_h \mathbf{h}_{t-1} + U_h \mathbf{x}_t +
\mathbf{b}_h) \tag{16} \\
\mathbf{o}_t &amp;= W_o \mathbf{h}_t + \mathbf{b}_o \tag{17} \\
p(\mathbf{y}_t \mid \mathbf{x}_{\le t}) &amp;=
\operatorname{softmax}(\mathbf{o}_t) \tag{18} \\
\ell_t(\theta) &amp;= -\log p(y_t^\star \mid \mathbf{x}_{\le t})
\tag{19} \\
\mathcal{J}(\theta) &amp;= \sum_{t=1}^{T}\ell_t(\theta) \tag{20} \\
\nabla_\theta \mathcal{J}(\theta) &amp;= \sum_{t=1}^{T}\nabla_\theta
\ell_t(\theta) \tag{21}
\end{align}
</span></p>
<h3 id="alignat-with-tags"><code>alignat</code> with tags</h3>
<p><span class="math display">
\begin{alignat}{2}
f(x)   &amp;= x^4 + 2x^3 - x + 7, \qquad &amp; f&#39;(x)   &amp;= 4x^3 +
6x^2 - 1 \tag{22} \\
g(x)   &amp;= e^{x}\sin x,                &amp; g&#39;(x)   &amp;=
e^{x}(\sin x + \cos x) \tag{23} \\
h(x)   &amp;= \ln(1+x^2),                 &amp; h&#39;(x)   &amp;=
\frac{2x}{1+x^2} \tag{24}
\end{alignat}
</span></p>
<h3 id="gather-and-gathered"><code>gather</code> and
<code>gathered</code></h3>
<p><span class="math display">
\begin{gather}
\int_{-\infty}^{\infty} e^{-x^2}\,dx = \sqrt{\pi} \tag{25} \\
\int_{0}^{\infty} x^{s-1}e^{-x}\,dx = \Gamma(s) \tag{26} \\
\zeta(s)=\frac{1}{\Gamma(s)}\int_0^\infty \frac{x^{s-1}}{e^x-1}\,dx
\tag{27}
\end{gather}
</span></p>
<p><span class="math display">
\begin{gathered}
\left(
\sum_{k=1}^{n} a_k
\right)^2
=
\sum_{k=1}^{n} a_k^2
+ 2\sum_{1\le i&lt;j\le n} a_i a_j
\\
\left(
\sum_{k=1}^{n} a_k
\right)^3
=
\sum_{k=1}^{n} a_k^3
+ 3\sum_{i\ne j} a_i^2 a_j
+ 6\sum_{1\le i&lt;j&lt;\ell\le n} a_i a_j a_\ell
\end{gathered}
</span></p>
<h3 id="same-derivation-without-tags-alignment-comparison">Same
derivation without tags (alignment comparison)</h3>
<p><span class="math display">
\mathrm{Hom}_{\mathcal{C}}(A \otimes B, C)
\cong
\mathrm{Hom}_{\mathcal{C}}(A, [B,C])
\cong
\mathrm{Nat}\!\left(h_A \times h_B, h_C\right)
\tag{28}
</span></p>
<p><span class="math display">
\begin{aligned}
F(\operatorname{colim}_{i \in I} X_i)
&amp;\cong \operatorname{colim}_{i \in I} F(X_i)
\\
G(\operatorname{lim}_{j \in J} Y_j)
&amp;\cong \operatorname{lim}_{j \in J} G(Y_j)
\end{aligned}
</span></p>
<h3 id="matrix-heavy-block-with-tag">Matrix-heavy block with tag</h3>
<p><span class="math display">
\Sigma =
\begin{bmatrix}
\sigma_{11} &amp; \sigma_{12} &amp; \cdots &amp; \sigma_{1n} \\
\sigma_{21} &amp; \sigma_{22} &amp; \cdots &amp; \sigma_{2n} \\
\vdots      &amp; \vdots      &amp; \ddots &amp; \vdots      \\
\sigma_{n1} &amp; \sigma_{n2} &amp; \cdots &amp; \sigma_{nn}
\end{bmatrix},
\qquad
\Sigma^{-1}
=
\frac{1}{\det(\Sigma)}\,\operatorname{adj}(\Sigma)
\tag{29}
</span></p>
<h3 id="block-matrix-piecewise">Block matrix + piecewise</h3>
<p><span class="math display">
M =
\begin{bmatrix}
A &amp; B \\
C &amp; D
\end{bmatrix},
\qquad
M^{-1} =
\begin{bmatrix}
(A-BD^{-1}C)^{-1} &amp; -A^{-1}B(D-CA^{-1}B)^{-1} \\
-D^{-1}C(A-BD^{-1}C)^{-1} &amp; (D-CA^{-1}B)^{-1}
\end{bmatrix}
\tag{30}
</span></p>
<p><span class="math display">
f(x)=
\begin{cases}
\sin(x)/x, &amp; x \ne 0 \\
1, &amp; x = 0
\end{cases}
\tag{31}
</span></p>
<h3 id="pseudo-diagram-flavored-formulas">Pseudo-diagram flavored
formulas</h3>
<p><span class="math display">
A \xrightarrow{f} B \xrightarrow{g} C,\qquad g\circ f = h
\tag{32}
</span></p>
<p><span class="math display">
\begin{array}{ccc}
X &amp; \xrightarrow{\ \alpha\ } &amp; Y \\
\downarrow {\scriptstyle u} &amp;  &amp; \downarrow {\scriptstyle v} \\
X&#39; &amp; \xrightarrow{\ \beta\ } &amp; Y&#39;
\end{array}
\qquad \text{with } v\circ\alpha = \beta\circ u
\tag{33}
</span></p>
<h3 id="box-parade">Box parade</h3>
<p><span class="math display">
\boxed{\boxed{\sum_{k=1}^{n} k = \frac{n(n+1)}{2}}}
\tag{34}
</span></p>
<p><span class="math display">
\boxed{
\begin{aligned}
\forall \varepsilon &gt; 0\ \exists N\ \forall n\ge N:\
\left|a_n - L\right| &lt; \varepsilon
\end{aligned}
}
\tag{35}
</span></p>
<h3 id="escape-matrix-plain-text-no-code-spans">Escape matrix (plain
text, no code spans)</h3>
<p>Everything below should remain plain text and not become math:</p>
<ul>
<li>Dollar literal: $19.99</li>
<li>Shell var literal: $PATH</li>
<li>Literal double-dollar: $$NOT_MATH$$</li>
<li>Literal inline delimiters: $x+y$ and $$</li>
<li>Literal display delimiters: $$x<sup>2+y</sup>2$$</li>
<li>Literal backslash-paren delimiters: \(x+y\)</li>
<li>Literal backslash-bracket delimiters: \[x+y\]</li>
<li>Literal braces: {a,b,c}</li>
<li>Literal percent: 100% complete</li>
<li>Literal underscore: file_name_v2</li>
<li>Literal hash: # heading-marker</li>
<li>Literal ampersand: R&amp;D</li>
<li>Literal pipe: a | b</li>
<li>Literal backtick: `inline`</li>
</ul>
<p>Inline prose escape checks:</p>
<p>I can write $100, $x$, $$y$$, \(z\), and \[w\] in normal text.</p>

</article>
        </main>
        <footer>
            Â© Karthik 2023-2026
        </footer>
    </div>
    <script>
        if (document.querySelector('blockquote.twitter-tweet')) {
            const twitterScript = document.createElement('script');
            twitterScript.async = true;
            twitterScript.src = 'https://platform.twitter.com/widgets.js';
            twitterScript.charset = 'utf-8';
            document.body.appendChild(twitterScript);
        }
    </script>
</body>
</html>
